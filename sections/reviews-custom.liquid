{% comment %}
  Reviews Section - Converted from React/Tailwind
  Replaces: Reviews.tsx
{% endcomment %}

<section class="bg-[#f0f9ff] py-16 lg:py-24" id="reviews">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="text-center mb-16">
        <h2 class="text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl">
          {{ section.settings.heading }}
        </h2>
        <p class="mt-4 text-lg text-gray-500">
          {{ section.settings.subheading }}
        </p>
      </div>
      
      <div class="grid gap-8 lg:grid-cols-3">
        {% for block in section.blocks %}
          <div class="bg-white rounded-2xl shadow-sm p-8 transition-transform hover:-translate-y-1 duration-300">
            <div class="flex items-center space-x-1 mb-4">
              {% assign rating = block.settings.rating | default: 5 %}
              {% for i in (1..5) %}
                <svg 
                  xmlns="http://www.w3.org/2000/svg" 
                  width="18" height="18" 
                  viewBox="0 0 24 24" 
                  fill="{% if i <= rating %}#facc15{% else %}none{% endif %}" 
                  stroke="{% if i <= rating %}#facc15{% else %}#d1d5db{% endif %}" 
                  stroke-width="2" stroke-linecap="round" stroke-linejoin="round" 
                  class="{% if i <= rating %}text-yellow-400{% else %}text-gray-300{% endif %}">
                  <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                </svg>
              {% endfor %}
            </div>
            
            <p class="text-gray-600 mb-6 min-h-[80px]">"{{ block.settings.text }}"</p>
            
            <div class="flex items-center">
              {% if block.settings.avatar != blank %}
                {{ block.settings.avatar | image_url: width: 100 | image_tag: class: 'h-10 w-10 rounded-full object-cover', alt: block.settings.author }}
              {% else %}
                <div class="h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center text-gray-500">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                </div>
              {% endif %}
              
              <div class="ml-3">
                <p class="text-sm font-medium text-gray-900">{{ block.settings.author }}</p>
                <p class="text-sm text-gray-500">{{ block.settings.verified_text }}</p>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>
  
  {% schema %}
  {
    "name": "Reviews Custom",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Loved by 10,000+ Cats"
      },
      {
        "type": "text",
        "id": "subheading",
        "label": "Subheading",
        "default": "(And their humans too)"
      }
    ],
    "blocks": [
      {
        "type": "review",
        "name": "Review",
        "settings": [
          {
            "type": "range",
            "id": "rating",
            "min": 1,
            "max": 5,
            "step": 1,
            "label": "Rating",
            "default": 5
          },
          {
            "type": "textarea",
            "id": "text",
            "label": "Review Text",
            "default": "This product changed my life!"
          },
          {
            "type": "image_picker",
            "id": "avatar",
            "label": "User Avatar"
          },
          {
            "type": "text",
            "id": "author",
            "label": "Author Name",
            "default": "Happy Customer"
          },
          {
            "type": "text",
            "id": "verified_text",
            "label": "Subtitle",
            "default": "Verified Buyer"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Reviews Custom",
        "blocks": [
          { "type": "review", "settings": { "author": "Sarah J.", "text": "I was skeptical about the price, but this thing is a life saver. No more smell, and my cats took to it immediately." }},
          { "type": "review", "settings": { "author": "Mike T.", "text": "The app is fantastic. I knew my cat was sick before he showed symptoms because of the usage tracking. Worth every penny." }},
          { "type": "review", "settings": { "author": "Emily R.", "rating": 4, "text": "Setup was easy. It's a bit large, but looks very modern and sleek. The cats love it." }}
        ]
      }
    ]
  }
  {% endschema %}